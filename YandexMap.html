<!DOCTYPE html>
<html>
<head>
    <title>Яндекс Карта</title>
    <meta charset="utf-8">
    <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=9d689ae6-49d5-44aa-956d-5f7316686726" type="text/javascript"></script>
    <script type="text/javascript">
        ymaps.ready(init);

        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        function init(){
            var address = getParameterByName('address'); // Получаем адрес из URL
            console.log("Полученный адрес: " + address);

            var myMap = new ymaps.Map("map", {
                center: [55.76, 37.64], // Москва (по умолчанию)
                zoom: 10
            });

            if (address) { // Если адрес передан
                // Геокодируем адрес (ищем координаты)
                ymaps.geocode(address, {
                    results: 1
                }).then(function (res) {
                    var firstGeoObject = res.geoObjects.get(0);
                    var coords = firstGeoObject.geometry.getCoordinates();

                    myMap.setCenter(coords, 15); // Центрируем карту на найденных координатах
                    var myPlacemark = new ymaps.Placemark(coords, {
                        hintContent: address,
                        balloonContent: address
                    });
                    myMap.geoObjects.add(myPlacemark);
                }, function (err) {
                    console.log('Ошибка геокодирования: ' + err.message); // Обрабатываем ошибку геокодирования
                });
            } else {
                console.log("Адрес не передан"); // Если адрес не передан
            }
        }
    </script>
</head>
<body>
    <div id="map"></div>
</body>
</html>
